<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>University System - Semesters</title>
    <h:outputStylesheet name="studentstyle.css" library="Css"/>
</h:head>

<h:body>

    <!-- Menubar -->
    <p:menubar styleClass="custom-menubar">
        <p:menuitem value="Students" url="Students.xhtml"/>
        <p:menuitem value="Courses" url="Courses.xhtml"/>
        <p:menuitem value="Enrollment" url="Enrollment.xhtml"/>
        <p:menuitem value="Semester" url="Semester.xhtml"/>
        <p:menuitem value="Faculties" url="Faculty.xhtml"/>
        <p:menuitem value="Majors" url="Major.xhtml"/>
    </p:menubar>

    <h:form id="mainForm">

        <br/>
        <!-- Add Semester Button -->
        <p:commandButton value="Add New Semester"
                         actionListener="#{semesterBean.prepareAdd}"
                         update=":semesterForm"
                         oncomplete="PF('semesterDialog').show();"
                         styleClass="ui-button-success" />

        <hr/>

        <!-- Semester Table -->
        <p:dataTable id="semesterTable" value="#{semesterBean.semesterList}" var="sem"
                     rows="10" rowHover="true">

            <p:column headerText="Name">#{sem.name}</p:column>
            <p:column headerText="Type">#{sem.type}</p:column>
            <p:column headerText="Start Date">#{sem.startDate}</p:column>
            <p:column headerText="End Date">#{sem.endDate}</p:column>
            <p:column headerText="Active">#{sem.active ? 'Yes' : 'No'}</p:column>

            <p:column headerText="Actions">

                <!-- Edit Button -->
                <p:commandButton icon="pi pi-pencil" title="Edit"
                                 actionListener="#{semesterBean.editSemester(sem)}"
                                 update=":semesterForm"
                                 oncomplete="PF('semesterDialog').show();"
                                 styleClass="ui-button-warning" />

                <!-- Delete Button -->
                <p:commandButton icon="pi pi-trash" title="Delete"
                                 actionListener="#{semesterBean.deleteSemester(sem)}"
                                 update=":mainForm:semesterTable"
                                 onclick="return confirm('Are you sure you want to delete this semester?');"
                                 styleClass="ui-button-danger" />


            </p:column>

        </p:dataTable>
    </h:form>

    <!-- Dialog for Add/Edit Semester -->
    <p:dialog header="Add/Edit Semester" widgetVar="semesterDialog"
              modal="true" resizable="false" width="400" dynamic="true" cache="false">
        <h:form id="semesterForm">
            <h:panelGrid columns="2" cellpadding="5">
                <!-- keep the id alive -->
                <h:inputHidden id="id" value="#{semesterBean.selectedSemester.id}" />

                <h:outputLabel for="name" value="Name:" />
                <h:inputText id="name" value="#{semesterBean.selectedSemester.name}" required="true" style="width:100%;" />

                <h:outputLabel for="type" value="Type:" />
                <p:selectOneMenu id="type" value="#{semesterBean.selectedSemester.type}" required="true" style="width:100%;">
                    <f:selectItems value="#{semesterBean.semesterTypes}" var="t" itemLabel="#{t}" itemValue="#{t}" />
                </p:selectOneMenu>

                <h:outputLabel for="startDate" value="Start Date:" />
                <p:calendar id="startDate" value="#{semesterBean.selectedSemester.startDate}"
                            pattern="yyyy-MM-dd" required="true"
                            showButtonPanel="true" navigator="true"
                            yearRange="1900:#{currentYear}" style="width:100%;"/>

                <h:outputLabel for="endDate" value="End Date:" />
                <p:calendar id="endDate" value="#{semesterBean.selectedSemester.endDate}"
                            pattern="yyyy-MM-dd" required="true"
                            showButtonPanel="true" navigator="true"
                            yearRange="1900:#{currentYear}" style="width:100%;" />

                <h:outputLabel for="active" value="Active:" />
                <p:selectBooleanCheckbox id="active" value="#{semesterBean.selectedSemester.active}" />
            </h:panelGrid>

            <p:commandButton value="Save"
                             actionListener="#{semesterBean.saveSemester}"
                             process="@form"
                             update=":mainForm:semesterTable"
                             oncomplete="PF('semesterDialog').hide();" />
        </h:form>
    </p:dialog>


</h:body>
</html>
