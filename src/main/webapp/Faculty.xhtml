<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
   <title>University System - Faculties</title>
   <h:outputStylesheet name="studentstyle.css" library="Css"/>
</h:head>

<h:body>

   <!-- Menubar -->
   <p:menubar styleClass="custom-menubar">
      <p:menuitem value="Students" url="Students.xhtml"/>
      <p:menuitem value="Courses" url="Courses.xhtml"/>
      <p:menuitem value="Enrollment" url="Enrollment.xhtml"/>
      <p:menuitem value="Semester" url="Semester.xhtml"/>
      <p:menuitem value="Faculties" url="Faculty.xhtml"/>
      <p:menuitem value="Majors" url="Major.xhtml"/>
   </p:menubar>


   <h:form id="mainForm">

      <br/>
      <!-- Add Faculty Button -->
      <p:commandButton value="Add New Faculty"
                       actionListener="#{facultyBean.prepareAdd}"
                       update=":facultyForm"
                       oncomplete="PF('facultyDialog').show();"
                       styleClass="ui-button-success" />

      <hr/>

      <!-- Faculty Table -->
      <p:dataTable id="facultyTable" value="#{facultyBean.facultyList}" var="f"
                   rows="10" rowHover="true">

         <p:column headerText="Name">#{f.name}</p:column>

         <p:column headerText="Actions">
            <!-- Edit -->
            <p:commandButton icon="pi pi-pencil" title="Edit"
                             actionListener="#{facultyBean.editFaculty(f)}"
                             update=":facultyForm"
                             oncomplete="PF('facultyDialog').show();"
                             styleClass="ui-button-warning" />

            <!-- Delete -->
            <p:commandButton icon="pi pi-trash" title="Delete"
                             actionListener="#{facultyBean.deleteFaculty(f)}"
                             update=":mainForm:facultyTable"
                             styleClass="ui-button-danger"
                             onclick="return confirm('Are you sure you want to delete this faculty?');" />
         </p:column>

      </p:dataTable>
   </h:form>

   <!-- Dialog for Add/Edit Faculty -->
   <p:dialog header="Add/Edit Faculty" widgetVar="facultyDialog"
             modal="true" resizable="false" width="400">

      <h:form id="facultyForm">
         <h:panelGrid columns="2" cellpadding="5">

            <!-- Hidden ID field -->
            <h:inputHidden value="#{facultyBean.selectedFaculty.id}" />

            <h:outputLabel for="name" value="Name:" />
            <h:inputText id="name" value="#{facultyBean.selectedFaculty.name}" required="true" style="width:100%;" />
         </h:panelGrid>

         <p:commandButton value="Save"
                          actionListener="#{facultyBean.saveFaculty}"
                          process="@form"
                          update=":mainForm:facultyTable"
                          oncomplete="PF('facultyDialog').hide();" />
      </h:form>
   </p:dialog>

</h:body>
</html>
